#nop;

#func suspect2LogicToken { #nop %1: suspect line;
    #switch {"%1"} {
        #case {"ÓĞµã·¢ÅÖ"} {#return ÅÖ};
        #case {"Æ«Êİ"} {#return Êİ};
        #case {"C"} {#return Êİ};
        #case {"¸ß¸ö×Ó"} {#return ¸ß};
        #case {"·¢¸£"} {#return ÅÖ};
        #case {"°«¸ö×Ó"} {#return °«};
        #case {"¸ö×Ó²»Ì«¸ß"} {#return °«};
        #case {"Öñ¸Í"} {#return Êİ};
        #case {"ºï×Ó"} {#return Êİ};
        #case {"ÓĞµãÅÖ"} {#return ÅÖ};

        #case {"»¨°×"} {#return ÀÏÄê};
        #case {"°×·¢²Ô²Ô"} {#return ÀÏÄê};
        #case {"°ëÖ»½ÅÂñÈë¹×²Ä"} {#return ÀÏÄê};
        #case {"ÀÏ´ó²»Ğ¡"} {#return ÖĞÄê};
        #case {"ÖĞÄê"} {#return ÖĞÄê};
        #case {"ÇàÄê"} {#return ÇàÄê};
        #case {"·Ç³£ÄêÇá"} {#return ÇàÄê};
        #case {"ÄêÇáÈË"} {#return ÇàÄê};

        #case {"Á÷ÀËºº"} {#return ÄĞ};
        #case {"ÄĞ"} {#return ÄĞ};
        #case {"Å®"} {#return Å®};

        #default {
            #regexp {"%1"} {"Éí´©{.+}µÄ"} {
                #var result %1;
                #repl result {Éí´©} {};
                #repl result {µÄ} {};
            };
            #regexp {"%1"} {"Éí´©{.+?}£¬"} {
                #var result %1;
                #repl result {Éí´©} {};
                #repl result {£¬} {};
                #return $result;
            };
            #regexp {"%1"} {"´©×ÅÒ»Ë«{.+}{µÄ|£¬}"} {
                #var result %1;
                #repl result {´©×ÅÒ»Ë«} {};
                #repl result {µÄ} {};
                #repl result {£¬} {};
                #return $result;
            };
            #regexp {"%1"} {"´©×Å{.+}É«Ğ¬×ÓµÄ"} {
                #var result %1;
                #repl result {´©×Å} {};
                #repl result {µÄ} {};
                #return $result;
            };
        };
    }
}

#func age2LogicToken { #nop %1, age;
    #local age %1;
    #repl age {Ô¼} {};
    #repl age {¶à} {};

    #if {"$age" == "Ê®" || "$age" == "¶şÊ®" || "$age" == "ÈıÊ®"} {#return ÇàÄê;};
    #if {"$age" == "ËÄÊ®" || "$age" == "ÎåÊ®"} {#return ÖĞÄê;};
    #else {#return ÀÏÄê;};
}

#func shape2LogicToken { #nop %1, shape description;
    #nop ÕâÊÇÒ»Î»Éí²ÄÒì³£¿ıÎà¸ß´óµÄĞĞÈË¡£:Å®ÈË¡¢¸ß¡¢ÅÖ;
    #nop ÕâÊÇÒ»Î»½¿Ğ¡ÁáççµÄĞĞÈË¡£:Å®ÈË¡¢°«¡¢C;
    #nop ÕâÊÇÒ»Î»Éí²Ä·áÂú°«Ğ¡µÄĞĞÈË¡£:Å®ÈË¡¢°«¡¢ÅÖ;
    #nop ÕâÊÇÒ»¸ö·áĞØÏ¸Ñü£¬Éí²ÄÃçÌõÍ¦°ÎµÄĞĞÈË¡£:Å®ÈË¡¢¸ß¡¢C;
    #nop ÕâÊÇÒ»Î»ÍğÈçÒ»¸ùÖñ¸ÍµÄĞĞÈË¡£:ÄĞÈË¡¢¸ß¡¢C;
    #nop ÕâÊÇÒ»Î»°«Ğ¡´ÖÅÖµÄĞĞÈË¡£:ÄĞÈË¡¢°«¡¢ÅÖ;
    #nop ÕâÊÇÒ»Î»¸ß´ó¿ıÎàµÄĞĞÈË¡£:ÄĞÈË¡¢¸ß¡¢ÅÖ;
    #nop ÕâÊÇÒ»Î»°«Ğ¡Áé»îµÄĞĞÈË¡£:ÄĞÈË¡¢°«¡¢C;

    #regexp {%1} {%*Òì³£¿ıÎà¸ß´ó%*} {#var result {Å®¸ßÅÖ};};
    #regexp {%1} {%*½¿Ğ¡Ááçç%*} {#var result {Å®°«Êİ};};
    #regexp {%1} {%*·áÂú°«Ğ¡%*} {#var result {Å®°«ÅÖ};};
    #regexp {%1} {%*·áĞØÏ¸Ñü%*} {#var result {Å®¸ßÊİ};};
    #regexp {%1} {%*Ò»¸ùÖñ¸Í%*} {#var result {ÄĞ¸ßÊİ};};
    #regexp {%1} {%*°«Ğ¡´ÖÅÖ%*} {#var result {ÄĞ°«ÅÖ};};
    #regexp {%1} {%*¸ß´ó¿ıÎà%*} {#var result {ÄĞ¸ßÅÖ};};
    #regexp {%1} {%*°«Ğ¡Áé»î%*} {#var result {ÄĞ°«Êİ};};
}

#func cloth2LogicToken { #nop %1: color and cloth/shoe;
    #nop {[30m±¡µ×¿ìÑ¥[2;37;0m};

    #echo {%1};
    #if {{%1} == {\e[{(1;)?(30|31|34|35)}m%+} } {
        #var result ÉîÉ«;
    }; #elseif {{%1} == {\e[{(1;)?(32|33|36|37)}m%+} } {
        #var result Ç³É«;
    };

    #if {{%1} == {%+{Ë¿Ö¯³¤ÉÀ|Ë¿³ñ¶Ìñà|³ñÅÛ|Ë¿Ö¯ÈåÉÀ|ÇáÂŞÉ´|ÆìÅÛ}%+} } {
        #var result {$resultÒÂ·şË¿³ñÒÂ·ş};
    }; #elseif {{%1} == {%+{¿²¼ç|Ô²ÁìÉÀ|»Ò²¼ÉÀ|»ÒÂí¹Ó|°ÙñŞÈ¹|À¶Âí¹Ó|¶Ì´ò¾¢×°|ÌìÀ¶½õÅÛ}%+} } {
        #var result {$resultÒÂ·ş²¼ÒÂ};
    }; #elseif {{%1} == {%+{º×ë©|³¤°À|ÃŞ°À|ÀÇÆ¤°À|¶Ì°À|±È¼×}%+} } {
        #var result {$resultÒÂ·ş¼Ğ°À};
    };

    #if {{%1} == {%+{Å£Æ¤¶ÌÑ¥|ÂíÑ¥|Å®Ê½¶ÌÑ¥|Å®Ê½³¤Ñ¥|±¡µ×¿ìÑ¥|ÆßĞÇ½£Ñ¥}%+} } {
        #var result {$resultĞ¬×ÓÑ¥×Ó};
    }; #elseif {{%1} == {%+{Ğå»¨Ğ¬|½õĞ¬|·ïĞ¬|²¼Ğ¬|ÂéĞ¬|Ç§²ãµ×²¼Ğ¬}%+} } {
        #var result {$resultĞ¬×Ó²¼Ğ¬};
    }; #elseif {{%1} == {%+{Ä¾åì|²İĞ¬|ÆÆĞ¬}%+} } {
        #var result {$resultĞ¬×ÓÁ¹Ğ¬};
    };

}

#func print_juewei { #nop;
    #local size @sizeof{list_juewei_name};
    #if {$size < 1} {#return};

    #loop 1 $size tmp_index {

        #local feature {$list_juewei_age[$tmp_index]$list_juewei_shape[$tmp_index]$list_juewei_cloth[$tmp_index]$list_juewei_shoe[$tmp_index]};
        #var list_juewei_feature[$tmp_index] {$feature};
    };

    #local tmp @checkSuspect{0;list_juewei_good};
    #local tmp @checkSuspect{1;list_juewei_good_sex};
    #local tmp @checkSuspect{2;list_juewei_good_age};

    #echo <aff>========================================<eee>;
    #loop 1 $size tmp_index {
        #echo {%s: <faa>%s<eee> %s, %s, %s, %s, %s, %s, %s} $list_juewei_name[$tmp_index] $list_juewei_suspect[$tmp_index] $list_juewei_age[$tmp_index] $list_juewei_shape[$tmp_index] $list_juewei_cloth[$tmp_index] $list_juewei_shoe[$tmp_index] $list_juewei_good[$tmp_index] $list_juewei_good_sex[$tmp_index] $list_juewei_good_age[$tmp_index];

    };
    #echo <aff>========================================<eee>;

}

#func checkSuspect { #nop %1: if 1 use sex, if 2 use age, otherwise nothing, %2: good list name;
    #local size @sizeof{list_juewei_name};
    #if {$size < 1} {#return};

    #var %2 {};
    #loop 1 $size tmp_index { #list %2 add {?}; };

    #loop 1 $size tmp_index {

        #if {"$list_juewei_suspect[$tmp_index]" == "None"} {#continue};
        #if {"$list_juewei_suspect[$tmp_index]" == "Wrong"} {
            #var %2[$tmp_index] o;
            #continue;
        };
        #if {%1 == 0 && ({$list_juewei_suspect[$tmp_index]} == {{Å®|ÄĞ}} || {$list_juewei_suspect[$tmp_index]} == {{\S+Äê}} )} {#continue};
        #if {%1 == 1 && ({$list_juewei_suspect[$tmp_index]} == {{\S+Äê}} )} {#continue};
        #if {%1 == 2 && ({$list_juewei_suspect[$tmp_index]} == {{Å®|ÄĞ}} )} {#continue};

        #if {{$list_juewei_feature[$tmp_index]} == {%*$list_juewei_suspect[$tmp_index]%*}} {
            #nop #echo {loop $tmp_index feature match: $list_juewei_feature[$tmp_index] and $list_juewei_suspect[$tmp_index]};
            #nop #echo {setting suspect $tmp_index as good};
            #var %2[$tmp_index] o;
        };

        #loop 1 $size tmp_index2 {
            #if {$tmp_index2 == $tmp_index} {#continue};

            #if {{$list_juewei_feature[$tmp_index2]} != {%*$list_juewei_suspect[$tmp_index]%*}} {
                #nop #echo {loop $tmp_index feature not match: $list_juewei_feature[$tmp_index2] and $list_juewei_suspect[$tmp_index]};
                #nop #echo {setting suspect $tmp_index2 as good};
                #var %2[$tmp_index2] o;
            };
        };
    };

}

#nop act--------------------------------------;

#act {^    ¾©Õ×ÉÙÒü ¹ùÂ¡(Jingzhao shaoyin)} {
    ask shaoyin about ÈÎÎñĞÅÏ¢;
}

#var list_juewei_suspect {};
#var list_juewei_name {};
#var list_juewei_age {};
#var list_juewei_shape {};
#var list_juewei_cloth {};
#var list_juewei_shoe {};
#var list_juewei_feature {};

#act {^ÄãÏò%+ÎÊµÀ£º%+£¬²»Öª×î½üÓĞÃ»ÓĞÌıËµÊ²Ã´ÏûÏ¢£¿} {
    #list list_juewei_name add %1;

    #act {^%1ËµµÀ£º¡¸ÎÒÉ¶ÏûÏ¢Ò²²»ÁË½â°¡¡£¡¹} {
        #var list_juewei_suspect[@sizeof{list_juewei_name}] {None};
    } {4};

    #act {^%1ËµµÀ£º¡¸{\S+?(ÓĞµã·¢ÅÖ|C|Æ«Êİ|¸ß¸ö×Ó|·¢¸£|°«¸ö×Ó|¸ö×Ó²»Ì«¸ß|Öñ¸Í|ºï×Ó|ÓĞµãÅÖ|Éí´©.+µÄ|Éí´©.+?£¬|´©×ÅÒ»Ë«.+?(µÄ|£¬)|´©×Å.+É«Ğ¬×ÓµÄ|»¨°×|°×·¢²Ô²Ô|°ëÖ»½ÅÂñÈë¹×²Ä|ÀÏ´ó²»Ğ¡|ÖĞÄê|ÇàÄê|·Ç³£ÄêÇá|ÄêÇáÈË|Á÷ÀËºº|ÄĞ|Å®)\S+}¡¹} {
        #var list_juewei_suspect[@sizeof{list_juewei_name}] {@suspect2LogicToken{%%2}};
    } {4};

    #act {^%1ËµµÀ£º¡¸} {
        #var list_juewei_suspect[@sizeof{list_juewei_name}] {Wrong};
    };

}

#nop ÄãÏò¹ËÇÚÎÊµÀ£ºÕâÎ»ÉñÏÉ½ã½ã£¬²»Öª×î½üÓĞÃ»ÓĞÌıËµÊ²Ã´ÏûÏ¢£¿;
#nop Ã«ÃÃËµµÀ£º¡¸ÎÒÉ¶ÏûÏ¢Ò²²»ÁË½â°¡¡£¡¹;

#nop ĞìÔ·»İËµµÀ£º¡¸ÎÒ×¢Òâµ½ÄÇÌì°øÍíÓĞÒ»¸öÓĞµã·¢ÅÖµÄÈËµÄÔÚ¸½½ü¹í¹í³ç³çµØ×ªÓÆÁËºÃ¼¸´Î¡£¡¹;
#nop Ë÷Ë¼æ·ËµµÀ£º¡¸ÎÒ¼Ç²»Ì«Çå³şÁË£¬²»¹ıµ±Ê±ÓĞÒ»µÀºÚÓ°´ÓµêºóÃæ·­Ç½¶ø³ö£¬³¤µÃÓĞµãÆ«C¡£¡¹;
#nop ·Ñ¿ì¾¢ËµµÀ£º¡¸Ç°Ò»Õó×ÓÓĞÒ»¸ö¸ß¸ö×ÓµÄ¹Ë¿ÍÃ¿Ìì¶¼µ½µêÀïÀ´£¬µ«ÊÇ´Ó²»Âò¶«Î÷£¬³öÊÂÒÔºó¾ÍÔÙÒ²Ã»ÓĞ¿´¼ûÕâ¸öÈËÁË¡£¡¹;
#nop ·®Ì´ÂÍËµµÀ£º¡¸Ç°Ò»Õó×ÓÓĞÒ»¸öÎ¢Î¢·¢¸£µÄ¹Ë¿ÍÃ¿Ìì¶¼µ½µêÀïÀ´£¬µ«ÊÇ´Ó²»Âò¶«Î÷£¬³öÊÂÒÔºó¾ÍÔÙÒ²Ã»ÓĞ¿´¼ûÕâ¸öÈËÁË¡£¡¹;

#nop »ÆÇçÕæËµµÀ£º¡¸ÎÒ¼ÇµÃµ±Ê±ÓĞÒ»¸öÉí´©Ç³É«ÒÂ·şµÄÈË·Ç³£ÖµµÃ»³ÒÉ¡¹;
#nop ºîÂ¶ËµµÀ£º¡¸µ±Ê±ÓĞÒ»¸öÉí´©²¼ÒÂµÄÁ÷Ãñ´ÓµêÆÌºóÃæ·­Ç½¶ø³ö¡£¡¹;
#nop ÎºÌÎËµµÀ£º¡¸Ö»¼ÇµÃµ±Ê±ÄÇ¸öÈËÉí´©¼Ğ°À£¬·Ç³£ÆÆ¾ÉÁË£¬¾ÍÕâµãÓ¡Ïó·Ç³£Éî¿Ì¡£¡¹;

#nop ÁÖ¹óÓÂËµµÀ£º¡¸µ±Ê±ÍíÉÏÎÒ¿´¼ûÓĞÒ»¸ö½ÅÉÏ´©×ÅÒ»Ë«Á¹Ğ¬µÄÈË×ÜÔÚ¸½½ü³öÃ»¡£¡¹;
#nop ³ÂÁéÀòËµµÀ£º¡¸ÎÒ¼ÇµÃµ±Ê±ÓĞÒ»¸ö½ÅÉÏ´©×ÅÉîÉ«Ğ¬×ÓµÄÈË·Ç³£ÖµµÃ»³ÒÉ¡¹;

#nop ÀîÇï±ªËµµÀ£º¡¸ÊÀ·çÈÕÏÂ°¡£¬Í··¢»¨°×ÁË»¹³öÀ´¸ÉÕâÖÖÊÂÇé¡£¡¹;
#nop ÎÅ´óÁùËµµÀ£º¡¸µ±Ê±ÎÒ×¢Òâµ½Õâ¸öÈËÁË£¬¾ÍÊÇÃ»¸ÒÉÏÇ°£¬ÊÇÒ»¸öÖĞÄêÈË¡£¡¹;
#nop ·ë³ÉËµµÀ£º¡¸µ±Ê±ÎÒ×¢Òâµ½Õâ¸öÈËÁË£¬¾ÍÊÇÃ»¸ÒÉÏÇ°£¬²»¹ıÄÇ¸öµÁÔô·Ç³£ÄêÇá¡£¡¹;

#nop ¹ËÇÚËµµÀ£º¡¸Ç°¼¸ÌìÎÒÈ¥ÄÇ¼ÒµêÀïÂò¶«Î÷µÄÊ±ºò×Ü·¢ÏÖÒ»¸öÁ÷ÀËººÔÚ¸½½ü×ªÓÆ¡£¡¹;
#nop Áîºü»İÁùËµµÀ£º¡¸ÎÒ¸Ğ¾õÕâĞ©Â·±ßµÄÁ÷ÀËººÏÓÒÉ·Ç³£´ó¡£¡¹;

#act {^%s%+¿´ÆğÀ´%+Ëê¡£} {
    #echo {juewei age match};
    #var list_juewei_age[@sizeof{list_juewei_name}] {@age2LogicToken{%3}};
} {2}

#act {^ÕâÊÇÒ»%+µÄĞĞÈË¡£} {
    #var list_juewei_shape[@sizeof{list_juewei_name}] {@shape2LogicToken{%1}};
} {2}
#act {~%s%+Éí´©Ò»¼ş%+(%+)} {
    #nop #echo {act: %3};
    #var list_juewei_cloth[@sizeof{list_juewei_name}] {@cloth2LogicToken{%3}};
    #nop #sys {touch juewei.txt; echo '%3' >> juewei.txt};
} {2}
#act {~%s%+½ÅµÅÒ»Ë«%+(%+)} {
    #var list_juewei_shoe[@sizeof{list_juewei_name}] {@cloth2LogicToken{%3}};
    #nop #sys {touch juewei.txt; echo '%3' >> juewei.txt};

} {2}

#nop    ¨„¡«¡«¡î Ëı¿´ÆğÀ´Ô¼ËÄÊ®¶àËê¡£;
#nop ÕâÊÇÒ»¸ö·áĞØÏ¸Ñü£¬Éí²ÄÃçÌõÍ¦°ÎµÄĞĞÈË¡£;
#nop   ¡õÉí´©Ò»¼şÔ²ÁìÉÀ(Yuanling shan);
#nop   ¡õ½ÅµÅÒ»Ë«½õĞ¬(Jin xie);

#nop ¹ùÕ÷ÃñËµµÀ£º¡¸¸ÒÀ¹×¡ÀÏ×ÓµÄÈ¥Â·£¬È¥ËÀ°É£¡¡¹;
#nop Ã«ÃÃËµµÀ£º¡¸ÄãÕÒ´íÈËÁË°É£¿¿´À´»¹ĞèÒª×ĞÏ¸¹Û²ì°¡¡£¡¹;

#act {{^(?!¡¾)\S+ËµµÀ£º¡¸¸ÒÀ¹×¡ÀÏ×ÓµÄÈ¥Â·£¬È¥ËÀ°É£¡¡¹}} {
    #echo {match untic};
    #unact {^%%s%%+¿´ÆğÀ´%%+Ëê¡£};
} {4}
